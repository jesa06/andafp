<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>API | JESA’s Fastpages</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="API" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="My first blog with Fastpages! I literally don’t understand what I’m doing but socials down below lol" />
<meta property="og:description" content="My first blog with Fastpages! I literally don’t understand what I’m doing but socials down below lol" />
<link rel="canonical" href="https://jesa06.github.io/andafp/api/overview" />
<meta property="og:url" content="https://jesa06.github.io/andafp/api/overview" />
<meta property="og:site_name" content="JESA’s Fastpages" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="API" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"My first blog with Fastpages! I literally don’t understand what I’m doing but socials down below lol","headline":"API","url":"https://jesa06.github.io/andafp/api/overview"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/andafp/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://jesa06.github.io/andafp/feed.xml" title="JESA's Fastpages" /><link rel="shortcut icon" type="image/x-icon" href="/andafp/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/andafp/">JESA&#39;s Fastpages</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/andafp/https:/github.com/jesa06/andafp/blob/9663f63361b75e4ffd7b14d3ed1b352ae4c50724/_pages/01_About%20me.md/">About Me</a><a class="page-link" href="/andafp/https:/github.com/jesa06/andafp/blob/9663f63361b75e4ffd7b14d3ed1b352ae4c50724/_pages/02_My%20Family.md/">My Family</a><a class="page-link" href="/andafp/https:/github.com/jesa06/andafp/blob/9663f63361b75e4ffd7b14d3ed1b352ae4c50724/_pages/03_Notes.md/">Notes</a><a class="page-link" href="/andafp/_pages/04_PsychologyandtheGoodLife.html">Psychology and the Good Life</a><a class="page-link" href="/andafp/api/overview">API</a><a class="page-link" href="/andafp/HTMLJSTable/">HTML and JS Table</a><a class="page-link" href="/andafp/search/">Search</a><a class="page-link" href="/andafp/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <!-- HTML table fragment for page -->
<h2 id="apis-in-this-sub-menu">APIs in this Sub Menu</h2>
<blockquote>
  <p>HTML, CSS, and JavaScript are the front-end of the API.  Python and API resource definitions are used for RESTful API definitions. Abstraction of Frontend and Backend code, the exchange of standard data format (JSON), and guidelines for exchange (REST) is a technique that saves a lot of time between developers.  Learning APIs is a highly recommended step for every developer trying to break into the world of tech.&lt;html&gt;</p>
</blockquote>

<script>

    function testButtonClick(city) {
        
alert("yo momma!:  " + city);

        // prepare HTML result container for new output
        const resultContainer = document.getElementById("astronomy");

alert("1: " + resultContainer);

        // prepare fetch options
            const url = "https://weatherapi-com.p.rapidapi.com/astronomy.json?q=San%20Diego"; 

alert("2: " + url);
            
            const headers = {
                method: 'GET', // *GET, POST, PUT, DELETE, etc.
                mode: 'cors', // no-cors, *cors, same-origin
                cache: 'default', // *default, no-cache, reload, force-cache, only-if-cached
                credentials: 'omit', // include, *same-origin, omit
                headers: {
                    'Content-Type': 'application/json',
                    'X-RapidAPI-Key': '0b6ef107f7msh5606de624633ceap17521ejsn27566d20ff5b',
                    'X-RapidAPI-Host': 'weatherapi-com.p.rapidapi.com'
                },
            };

alert("3: " + headers);

        // fetch the API
        fetch(url, headers)
        // response is a RESTful "promise" on any successful fetch
        .then(response => {
            // check for response errors
            if (response.status !== 200) {
                const errorMsg = 'Database response error: ' + response.status;
                console.log(errorMsg);
                const tr = document.createElement("tr");
                const td = document.createElement("td");
                td.innerHTML = errorMsg;
                tr.appendChild(td);
                resultContainer.appendChild(tr);
                return;
            }
            // valid response will have json data
            response.json().then(data => {
                console.log(data);
                console.log(data.location)

                // World Data
                document.getElementById("name").innerHTML = data.location.name;
                document.getElementById("region").innerHTML = data.location.region;
                document.getElementById("country").innerHTML = data.location.country;
                document.getElementById("lat").innerHTML = data.location.lat;
                document.getElementById("lon").innerHTML = data.location.lon;
                document.getElementById("tz_id").innerHTML = data.location.tz_id;
                document.getElementById("localtime_epoch").innerHTML = data.location.localtime_epoch;
                document.getElementById("localtime").innerHTML = data.location.localtime;


        /*
                // Country data
                for (const row of data.countries_stat) {
                    console.log(row);

                    // tr for each row
                    const tr = document.createElement("tr");
                    // td for each column
                    const name = document.createElement("td");
                    const cases = document.createElement("td");
                    const deaths = document.createElement("td");
                    const active = document.createElement("td");

                    // data is specific to the API
                    name.innerHTML = row.country_name;
                    cases.innerHTML = row.cases; 
                    deaths.innerHTML = row.deaths; 
                    active.innerHTML = row.active_cases; 

                    // this builds td's into tr
                    tr.appendChild(name);
                    tr.appendChild(cases);
                    tr.appendChild(deaths);
                    tr.appendChild(active);

                    // add HTML to container
                    resultContainer.appendChild(tr);
                }
        */
            })
        })

alert("3: post fetch");

    }


</script>

<body>

<h1>API Information and Example</h1>

<a href="#overviewbutton"><button> Overview </button></a>
<a href="#astronomybutton"><button> Astronomy API </button></a>


<div id="overviewbutton">&nbsp;</div>

    <div>
        <hr />
        <p>
            A Web API is an application programming interface typically for a web browser.  Non-changing or Static Endpoints are used in interacting with the server-side Web APIs.  RESTful Web APIs use HTTP methods to access resources via URL parameters, and use JSON for transmitting text between client and server.
            <ul>
                <li>Server.  In these examples, we will be using Python to define REST APIs. Python tools are very popular for building RESTful APIs</li>
                <ul> 
                    <li>REST: Representational State Transfer.  A set of guidelines on how to architect a network-connected software system.</li>
                    <li>Client-server: One guideline is a client and server must be decoupled from each other, allowing each to develop independently.</li>
                    <li>Layered system: The client may access the resources on the server indirectly through other layers such as a proxy or using authentication. This will be clarified by application and security requirements.</li>
                </ul>

                <li>Client.  JavaScript is the frontend language used to consume data from the Python defined REST APIs. Fetch will be used to make HTTP requests, as well as handle HTTP response.  There are four basic HTTP methods, they align with Create, Read, Update, Delete (CRUD).</li>
                <ul> 
                    <li>GET =&gt; Retrieve/Read data</li>
                    <li>POST =&gt; Create data</li>
                    <li>PUT =&gt; Update data</li>
                    <li>DELETE =&gt; Delete data</li>
                </ul>

                <li>REST endpoints will have similarity from application to application.  In planning APIs, for a Users system you can anticipate key methods.  The Users RESTful APIs would likely contain these endpoints.</li>
                <ul> 
                    <li>GET: /users =&gt; Get a list of users</li>
                    <li>GET: /users(id) =&gt; Get a single user</li>
                    <li>POST: /users =&gt; Create a new user</li>
                    <li>PUT: /users(id) =&gt; Update a user</li>
                    <li>DELETE: /users(id) =&gt; Delete a user</li>
                </ul>

                <li>Once a RESTful API receives and processes an HTTP request, it will return an HTTP response. Included in this response is an HTTP status code.  Common status codes are shown.</li>
                <ul> 
                    <li>200 =&gt; OK, this response will then have the promise of JSON data</li>
                    <li>400 =&gt; Bad Request</li>
                    <li>404 =&gt; Not Found</li>
                    <li>500 =&gt; Internal Server Error (aka bug)</li>
                </ul>

            </ul>
        </p>
        <hr />
    </div>

<!-- HTML table fragment for page -->


If you choose a city, it will list out the location and astronomy details.

<div id="astronomybutton">

<a href="#" class="btn btn-primary">Frontend Code!</a>
<a href="https://github.com/jesa06/andafp/blob/f5ded5f90611be9291c8ffe45f696a5e8b42e9b8/_notebooks/2022-10-03-PBL-python_rapidapi.ipynb" class="btn btn-primary">Backend Code!</a><br />

<label for="city">Enter city name:</label>
<input type="text" id="city" name="city" />&nbsp;&nbsp;<input type="button" value="Get Location &amp; Astronomy" onclick="testButtonClick(document.getElementById('city').value)" />
<br /><br />

<table>
  <thead>Location Details
  <tr>
    <th>City</th>
    <th>Region</th>
    <th>Country</th>
    <th>Latitude</th>
    <th>Longitude</th>
    <th>Time Zone</th>
    <th>Local Time Epoch</th>
    <th>Local Date and Time</th>
  </tr>
  </thead>
  <tbody>
    <td id="name"></td>
    <td id="region"></td>
    <td id="country"></td>
    <td id="lat"></td>
    <td id="lon"></td>
    <td id="tz_id"></td>
    <td id="localtime_epoch"></td>
    <td id="localtime"></td>
  </tbody>
</table>






<table>
    <thead>Astronomy Details
    <tr>
        <th>Sunrise</th>
        <th>Sunset</th>
        <th>Moonrise</th>
        <th>Moonset</th>
        <th>Moon Phase</th>
        <th>Moon Illumination</th>
    </tr>
    </thead>
    <tbody>
        <td id="astronomy"></td>
        <td id="astronomy"></td>
        <td id="astronomy"></td>
        <td id="astronomy"></td>
        <td id="astronomy"></td>
        <td id="astronomy"></td>
    </tbody>
</table>    


<script>


/*
import requests

url = "https://weatherapi-com.p.rapidapi.com/astronomy.json"

city = input("Choose a city")
querystring = {"q":city}

headers = {
	"X-RapidAPI-Key": "0b6ef107f7msh5606de624633ceap17521ejsn27566d20ff5b",
	"X-RapidAPI-Host": "weatherapi-com.p.rapidapi.com"
}

response = requests.request("GET", url, headers=headers, params=querystring)

print(response.json)

print("Location details")
loc = response.json().get('location')  // turn response to json() so we can extract "world_total"
for key, value in loc.items():  // this finds key, value pairs in country
    print(key, ":", value)

print()

// This code looks for USA in "countries_stats"
print("Astronomy details")
astro = response.json().get('astronomy') // countries is the key, countries_stat is the value
// print(astro.items())
for key, value in astro.items():
	for x in value.keys() :
		print(x, ":", value[x])

//astro in astronomy:  # countries is a list
    //print(astro)
*/

<script>
</script></div></body>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/andafp/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/andafp/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/andafp/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>My first blog with Fastpages! I literally don&#39;t understand what I&#39;m doing but socials down below lol</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jesa06" target="_blank" title="jesa06"><svg class="svg-icon grey"><use xlink:href="/andafp/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://www.instagram.com/_joselyn_anda_" target="_blank" title="_joselyn_anda_"><svg class="svg-icon grey"><use xlink:href="/andafp/assets/minima-social-icons.svg#instagram"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
